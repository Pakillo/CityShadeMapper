<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="CityShadeMapper can generate high resolution shade maps 
    (e.g. for every square meter and every hour of the year) for any city or town 
    from open remote sensing (LiDAR) data. 
    CityShadeMapper can also return optimal routes within any two points in the city
    that maximise the amount of shade for pedestrians.">
<title>Generate High Resolution Shade Maps and Shaded Routes from Remote Sensing Data • CityShadeMapper</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Generate High Resolution Shade Maps and Shaded Routes from Remote Sensing Data">
<meta property="og:description" content="CityShadeMapper can generate high resolution shade maps 
    (e.g. for every square meter and every hour of the year) for any city or town 
    from open remote sensing (LiDAR) data. 
    CityShadeMapper can also return optimal routes within any two points in the city
    that maximise the amount of shade for pedestrians.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">CityShadeMapper</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="cityshademapper">CityShadeMapper<a class="anchor" aria-label="anchor" href="#cityshademapper"></a>
</h1></div>
<!-- badges: start -->
<p>CityShadeMapper is an open source <a href="https://www.r-project.org/" class="external-link">R package</a> that generates high-resolution insolation or shade maps from remote sensing (<a href="https://en.wikipedia.org/wiki/Lidar" class="external-link">LiDAR</a>) data. Free LiDAR data are now available for many countries (e.g. <a href="https://pnoa.ign.es/el-proyecto-pnoa-lidar" class="external-link">Spain</a>). Shade maps can be generated for every hour of the year and every square meter of entire cities (e.g. see <a href="https://www.mapasdesombra.org" class="external-link uri">https://www.mapasdesombra.org</a>).</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"Pakillo/CityShadeMapper"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>An example using LiDAR data from Sevilla, Spain (provided by <a href="https://pnoa.ign.es/el-proyecto-pnoa-lidar" class="external-link">IGN</a>):</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://pakillo.github.io/CityShadeMapper/">"CityShadeMapper"</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Read LiDAR data</span></span>
<span><span class="va">lidar</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_lidar.html">read_lidar</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"catedral.laz"</span>, package <span class="op">=</span> <span class="st">"CityShadeMapper"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate heights from LiDAR data</span></span>
<span><span class="va">heights</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/calc_heights_from_lidar.html">calc_heights_from_lidar</a></span><span class="op">(</span><span class="va">lidar</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate shade maps for 30 April (all day)</span></span>
<span><span class="va">shade</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/make_shademap.html">make_shademap</a></span><span class="op">(</span><span class="va">heights</span>, date <span class="op">=</span> <span class="st">"2022-04-30"</span>, hour <span class="op">=</span> <span class="fl">8</span><span class="op">:</span><span class="fl">21</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/plot_shademap.html">plot_shademap</a></span><span class="op">(</span><span class="va">shade</span>, legend <span class="op">=</span> <span class="cn">FALSE</span>, animate <span class="op">=</span> <span class="cn">TRUE</span>, smooth <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/catedral_abril.gif"></p>
<p>See <a href="https://www.mapasdesombra.org" class="external-link uri">https://www.mapasdesombra.org</a> for a more developed application of shade maps at both the canopy and ground level for Sevilla city in southern Spain.</p>
</div>
<div class="section level2">
<h2 id="how-it-works">How it works<a class="anchor" aria-label="anchor" href="#how-it-works"></a>
</h2>
<p>CityShadeMapper builds upon wonderful open source packages (e.g. <a href="https://github.com/r-lidar/lidR" class="external-link">lidR</a>, <a href="https://cran.r-project.org/package=solartime" class="external-link">solartime</a>, <a href="https://www.rayshader.com/" class="external-link">rayshader</a>, <a href="https://rspatial.github.io/terra/index.html" class="external-link">terra</a>, <a href="https://gdal.org/" class="external-link">GDAL</a>, etc) that make it possible. CityShadeMapper uses the LiDAR point cloud to build a detailed height map of the city, including trees and buildings. From this height information, and knowing the sun position at every time of year given the geographic coordinates of the city, CityShadeMapper calculates the amount of solar rays hitting every pixel of the surface (either at the roof/canopy or the ground level).</p>
</div>
<div class="section level2">
<h2 id="limitations">Limitations<a class="anchor" aria-label="anchor" href="#limitations"></a>
</h2>
<p>Shade intensity under tree canopies is currently fixed at a low (5% illumination) value. If there is information available about vegetation type, density, etc, it could be used to refine the calculation of shade intensities below tree canopies, i.e. at the ground level. Illumination calculations at the canopy/roof level is unaffected by this.</p>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>If you found <code>CityShadeMapper</code> useful we’d love to know. Please do <a href="mailto:f.rodriguez.sanc@gmail.com">get in touch</a>. And please cite <code>CityShadeMapper</code> whenever you use it:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">citation</span>(<span class="st">"CityShadeMapper"</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>To cite CityShadeMapper use<span class="sc">:</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  Francisco Rodríguez<span class="sc">-</span>Sánchez <span class="sc">&amp;</span> Jesús Sánchez<span class="sc">-</span>Dávila. CityShadeMapper<span class="sc">:</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  Generate High Resolution Shade Maps and Shaded Routes from Remote</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  Sensing Data. https<span class="sc">:</span><span class="er">//</span>pakillo.github.io<span class="sc">/</span>CityShadeMapper</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>A BibTeX entry <span class="cf">for</span> LaTeX users is</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="sc">@</span>Manual{,</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    title <span class="ot">=</span> {CityShadeMapper<span class="sc">:</span> Generate High Resolution Shade Maps and Shaded Routes from Remote Sensing Data},</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    author <span class="ot">=</span> {Francisco Rodríguez<span class="sc">-</span>Sánchez and Jesús Sánchez<span class="sc">-</span>Dávila},</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    year <span class="ot">=</span> {<span class="dv">2022</span>},</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    url <span class="ot">=</span> {https<span class="sc">:</span><span class="er">//</span>pakillo.github.io<span class="sc">/</span>CityShadeMapper},</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  }</span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>AGPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing CityShadeMapper</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Francisco Rodríguez-Sánchez <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-7981-1599" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Jesús Sánchez-Dávila <br><small class="roles"> Author </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/Pakillo/CityShadeMap/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/Pakillo/CityShadeMap/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/Pakillo/CityShadeMap?branch=master" class="external-link"><img src="https://codecov.io/gh/Pakillo/CityShadeMap/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://www.repostatus.org/#wip" class="external-link"><img src="https://www.repostatus.org/badges/latest/wip.svg" alt="Project Status: WIP – Initial development is in progress, but there has not yet been a stable, usable release suitable for the public."></a></li>
<li><a href="http://hits.dwyl.com/Pakillo/CityShadeMapper" class="external-link"><img src="https://hits.dwyl.com/Pakillo/CityShadeMapper.svg?style=flat-square" alt="HitCount"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Francisco Rodríguez-Sánchez, Jesús Sánchez-Dávila.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
